#+Title: Bootstrapping steps
#+Author: Systems Team
#+SETUPFILE: ./org-templates/level-0.org
#+TAGS: boilerplate(b)
#+EXCLUDE_TAGS: boilerplate
#+OPTIONS: ^:nil
* Install git

#+BEGIN_EXAMPLE

yum install git -y

#+END_EXAMPLE

* Cloning Repository 

#+BEGIN_EXAMPLE

git clone https://github.com/vlead/cluster-automation.git

cd cluster-automation

#+END_EXAMPLE

* Open shell script and  change some variables

#+BEGIN_EXAMPLE

#! /bin/bash

password=vlead123

sed -i '/proxy=.*/d' /etc/yum.conf
echo 'proxy=http://proxy.iiit.ac.in:8080' >> /etc/yum.conf


yum install epel-release -y
yum install ansible -y
yum install emacs -y
yum install sshpass -y


ssh-keygen -t rsa -f /root/.ssh/id_rsa -q -P ""

echo 'StrictHostKeyChecking no' >> /etc/ssh/ssh_config

sudo mknod -m 666 /dev/tty c 5 0
sshpass -p $password ssh-copy-id root@localhost
sshpass -p $password ssh-copy-id root@127.0.0.1



#+END_EXAMPLE

* Run cluster.yml
#+BEGIN_EXAMPLE

ansible-playbook -i hosts cluster.yml

#+END_EXAMPLE

* Configuring servers parallely
Run the following playbooks in seperate terminals parallely
#+BEGIN_EXAMPLE

ansible-playbook -i hosts rsnapshot_server.yml
ansible-playbook -i hosts config_server.yml
ansible-playbook -i hosts router_server.yml
ansible-playbook -i hosts publicdns_server.yml
ansible-playbook -i hosts privatedns_server.yml
ansible-playbook -i hosts rsyslog_server.yml
ansible-playbook -i hosts reverseproxy_server.yml
ansible-playbook -i hosts nagios_server.yml
#+END_EXAMPLE
